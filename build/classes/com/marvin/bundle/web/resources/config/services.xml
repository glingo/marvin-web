<?xml version="1.0" encoding="UTF-8"?>
<container>
    <parameters>
    </parameters>
    
    <services>
        
        <!-- 
        
                      HTTP
        
        -->
        <service id="http.argument_resolver" class="com.marvin.bundle.web.controller.HttpServletRequestArgumentResolver" /> 
        
        <service id="http.controller.resolver" class="com.marvin.bundle.web.controller.HttpServletRequestControllerResolver">
            <argument type="service" ref="http.controller.name_parser"/>
        </service>
        
        <service id="request_handler" class="com.marvin.bundle.web.RequestHandler">
            <argument type="service" ref="event_dispatcher"/>
            <argument type="service" ref="http.controller.resolver"/>
            <argument type="service" ref="http.argument_resolver"/>
        </service>
        
        <!-- Router subscriber definition -->
        <service id="router.subscriber" class="com.marvin.bundle.web.routing.event.RouterSubscriber">
            <argument type="service" ref="router"/>
            <tag name="event_subscriber"/>
        </service>
        
    </services>
</container>
